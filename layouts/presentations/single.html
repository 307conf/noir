{{ define "main" }}
{{ if .Params.placeholder }}
<div class="max-w-6xl mx-auto px-4 py-12">
    <p class="text-text-secondary-light dark:text-text-secondary-dark text-lg">{{ T "noEntriesYet" | default "Content not available." }}</p>
</div>
{{ else }}
{{ $authorSlug := cond (isset .Params "slug") .Params.slug .File.TranslationBaseName }}

<!-- Try to find author page from authors field -->
{{ $primaryAuthor := "" }}
{{ with .Params.authors }}
    {{ if gt (len .) 0 }}
        {{ $primaryAuthor = index . 0 }}
    {{ end }}
{{ end }}

{{ $author := partial "presentation-author.html" . }}

<div class="max-w-6xl mx-auto px-4 py-12">
    <div class="bg-bg-primary-light dark:bg-bg-secondary-dark border border-border-primary-light dark:border-border-primary-dark rounded-2xl p-8 mb-10 shadow-lg">
        <h1 class="text-2xl md:text-3xl font-bold text-text-primary-light dark:text-text-primary-dark mb-4">{{ .Title }}</h1>
        <!-- Speaker info (stacked on mobile, inline on desktop) -->
        <div class="flex flex-col md:flex-row md:items-start md:justify-between md:gap-6 mb-6">
            <div class="flex flex-col md:flex-row md:items-center md:gap-6 space-y-2 md:space-y-0">
                <!-- Speaker name -->
                <div class="flex flex-wrap items-center gap-2">
                    {{ range $i, $a := $author.Items }}
                        {{ if $i }}<span class="text-text-secondary-light dark:text-text-secondary-dark">â€¢</span>{{ end }}
                        {{ if $a.Link }}
                            <a href="{{ $a.Link }}" class="group text-md font-bold inline-flex items-center gap-2 font-medium hover:text-accent-light dark:hover:text-accent-dark transition-colors duration-200 w-fit">
                                {{ $a.Name }}
                            </a>
                        {{ else }}
                            <p class="text-md uppercase tracking-wide text-text-secondary-light dark:text-text-secondary-dark">{{ $a.Name }}</p>
                        {{ end }}
                    {{ end }}
                </div>

                <!-- Date/Period -->
                <span class="flex items-center gap-2 py-2 pr-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="opacity-90" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" fill="none"></rect>
                        <path d="M16 2v4M8 2v4" stroke="currentColor"></path>
                        <path d="M3 10h18" stroke="currentColor"></path>
                        <path d="M8 14h4v4" stroke="currentColor"></path>
                    </svg>
                    <p class="text-gray-400 text-md">{{ with .Params.period }}{{ partial "format_datetime.html" (dict "date" . "format" "datetime") }}{{ else }}{{ partial "format_datetime.html" (dict "date" .Date "format" "datetime") }}{{ end }}</p>
                </span>

                <!-- Track -->
                <span class="flex items-center gap-2 py-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="opacity-90" width="16" height="16" viewBox="-7 -2 24 24"><path fill="currentColor" d="M4 9.9A5.002 5.002 0 0 1 5 0a5 5 0 0 1 1 9.9V19a1 1 0 0 1-2 0V9.9zM5 8a3 3 0 1 0 0-6a3 3 0 0 0 0 6z"/></svg>
                    <p class="text-gray-400 text-md">{{ with .Params.track }}{{ . }}{{ end }}</p>
                </span>
            </div>

            {{ with .Params.slides }}
            <a href="{{ . }}" class="inline-flex items-center gap-2 self-start md:self-center rounded-lg bg-gradient-to-r from-cyan-500 to-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-md hover:scale-[1.02] transition-transform duration-200" target="_blank" rel="noopener noreferrer">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <path d="M14 2v6h6"/>
                    <path d="M12 18v-6m-3 3h6"/>
                </svg>
                {{ T "viewSlides" | default "View slides" }}
            </a>
            {{ end }}
        </div>
        {{ with .Description }}
        <p class="text-text-secondary-light dark:text-text-secondary-dark text-lg">{{ . }}</p>
        {{ end }}
        <div class="prose prose-invert max-w-none">
            {{ .Content }}
        </div>
    </div>
</div>
{{ end }}
{{ end }}
